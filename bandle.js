(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("price-auto"),t=document.getElementById("initial-fee"),n=document.getElementById("deadline"),a=document.getElementById("price-auto-range"),d=document.getElementById("initial-fee-range"),l=document.getElementById("deadline-range"),o=document.getElementById("total-price"),u=document.getElementById("payment"),r=document.getElementById("initial-fee-rub"),c=document.querySelectorAll(".form__input_range");a.value=33e5,d.value=10,l.value=59;const i=()=>{e.value=a.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),t.value=d.value,n.value=l.value,m(Number(a.value.replace(/ /g,"")),t.value,n.value)};i();for(let e of c)e.addEventListener("input",(()=>{i(),m(Number(a.value.replace(/ /g,"")),t.value,n.value)}));function m(e,t,n){const a=Math.round(e/100*t),d=Math.round((e-a)*(.035*Math.pow(1.035,n)/(Math.pow(1.035,n)-1))),l=Math.round(a+n*d);if(d<0)return!1;o.value=`${l.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")} ₽`,u.value=`${d.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")} ₽`,r.value=`${a.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")} ₽`}const g=document.getElementById("form");g.addEventListener("submit",(async function(e){e.preventDefault();const t=new FormData(g),n=document.getElementById("form-btn");n.disabled=!0;let a=await fetch("https://eoj3r7f3r4ef6v4.m.pipedream.net",{method:"POST",headers:{"Content-Type":"application/json"},body:t}).catch((e=>{console.error("ERROR: ",e)}));a.ok?(await a.json(),alert("Заявка выполнена. Ожидайте ответ"),g.reset(),n.disabled=!1):alert("Извините, возникла ошибка")}))}))})();